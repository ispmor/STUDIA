<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="index,nofollow">

<title>LMP/6 - wikidyd - IETiSIP, Wydzial Elektryczny Politechniki Warszawskiej</title>
<script type="text/javascript" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static193/rightsidebar/css/msie.css">
<![endif]-->





<link rel="Start" href="http://wikidyd.iem.pw.edu.pl/WikiDyd">
<link rel="Alternate" title="Wiki Markup" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=raw">
<link rel="Alternate" media="print" title="Print View" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=print">
<link rel="Up" href="http://wikidyd.iem.pw.edu.pl/LMP">
<link rel="Appendix" title="lmp6.tgz" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=AttachFile&amp;do=view&amp;target=lmp6.tgz">
<link rel="Search" href="http://wikidyd.iem.pw.edu.pl/FindPage">
<link rel="Index" href="http://wikidyd.iem.pw.edu.pl/TitleIndex">
<link rel="Glossary" href="http://wikidyd.iem.pw.edu.pl/WordIndex">
<link rel="Help" href="http://wikidyd.iem.pw.edu.pl/HelpOnFormatting">
</head>

<body dir="ltr" lang="en">

<div id="header">

<form id="searchform" method="get" action="/LMP/6">
<div>
<input name="action" value="fullsearch" type="hidden">
<input name="context" value="180" type="hidden">
<label style="display: none;" for="searchinput">Search:</label>
<input class="disabled" id="searchinput" name="value" value="Search" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search" type="text">
<input disabled="disabled" id="titlesearch" name="titlesearch" value="Titles" alt="Search Titles" type="submit">
<input disabled="disabled" id="fullsearch" name="fullsearch" value="Text" alt="Search Full Text" type="submit">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>


<div id="locationline">
<div id="interwiki"><span><a href="http://wikidyd.iem.pw.edu.pl/WikiDyd" rel="nofollow">wikidyd - IETiSIP, Wydzial Elektryczny Politechniki Warszawskiej</a></span></div>

<ul id="pagelocation">
<li><a href="http://wikidyd.iem.pw.edu.pl/LMP">LMP</a></li><li><a class="backlink" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=fullsearch&amp;context=180&amp;value=linkto%3A%22LMP%2F6%22" rel="nofollow" title="Click to do a full-text search for this title">6</a></li>
</ul>

</div>

</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="http://wikidyd.iem.pw.edu.pl/RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="http://wikidyd.iem.pw.edu.pl/FindPage">FindPage</a></li><li class="wikilink"><a href="http://wikidyd.iem.pw.edu.pl/HelpContents">HelpContents</a></li><li class="current"><a href="http://wikidyd.iem.pw.edu.pl/LMP/6">LMP/6</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style=""><a href="#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/LMP/6">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option selected="selected" value="show">More Actions:</option><option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="RenamePage" disabled="disabled" class="disabled">Rename Page</option>
<option value="DeletePage" disabled="disabled" class="disabled">Delete Page</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="show" disabled="disabled" class="disabled">Subscribe User</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="show" disabled="disabled" class="disabled">Remove Spam</option>
<option value="show" disabled="disabled" class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="Load">Load</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" dir="ltr" lang="en">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><div><table><tbody><tr>  <td style="border-width: 0px; ; width: 66%"><p class="line862">Materiały zostały opracowane w ramach realizacji Programu Rozwojowego Politechniki Warszawskiej. </p></td>
  <td style="border-width: 0px;  text-align: right;"><p class="line862"> <img alt="http://prpw.iem.pw.edu.pl/images/KAPITAL_LUDZKI.gif" class="external_image" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/KAPITAL_LUDZKI.gif" title="http://prpw.iem.pw.edu.pl/images/KAPITAL_LUDZKI.gif"> <img alt="http://prpw.iem.pw.edu.pl/images/EU+EFS_P-kolor.gif" class="external_image" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/EUEFS_P-kolor.gif" title="http://prpw.iem.pw.edu.pl/images/EU+EFS_P-kolor.gif"> </p></td>
</tr>
<tr>  <td colspan="2" style="border-width: 0px;  text-align: center;"><span class="anchor" id="line-2"></span><p class="line891"><small><a class="http" href="http://www.pr.pw.edu.pl/"><img alt="http://www.pr.pw.edu.pl/" class="external_image" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/small_logo_prpw.jpg" title="http://www.pr.pw.edu.pl/"></a> jest projektem współfinansowanym przez Unię Europejską w ramach <a class="http" href="http://www.efs.gov.pl/">Europejskiego Funduszu społecznego</a>
 (działanie 4.1.1 Programu Operacyjnego Kapitał Ludzki) i ma na celu 
poprawę jakości kształcenia oraz dostosowanie oferty dydaktycznej 
Politechniki Warszawskiej do potrzeb rynku pracy. Będzie on realizowany 
przez Uczelnię w latach 2008-2015.</small> </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-3"></span><p class="line867"></p><hr class="hr4"><p class="line874"> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span></p><p class="line867">
</p><h3 id="Laboratorium_metodyki_programowania">Laboratorium metodyki programowania</h3>
<span class="anchor" id="line-6"></span><p class="line867">
</p><h2 id="A.2BAQY-wiczenie_6:_Przetwarzanie_napis.2BAPM-w">Ćwiczenie 6: Przetwarzanie napisów</h2>
<span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line867">
</p><h4 id="Scenariusz">Scenariusz</h4>
<span class="anchor" id="line-9"></span><ol type="a"><li>Student loguje się do systemu LOP (Laboratorium Otwartego Programowania). <span class="anchor" id="line-10"></span></li><li>Student przechodzi do katalogu roboczego dla zajęć LMP. <span class="anchor" id="line-11"></span></li><li>Student pobiera z repozytorium kod programów. <span class="anchor" id="line-12"></span></li><li>Po
 wyjaśnieniach prowadzącego student przystępuje do kompilacji i 
uruchomienia programów. Porównuje wynik działania z kodem źródłowym. <span class="anchor" id="line-13"></span></li><li>Student modyfikuje programy według wskazówek prowadzącego (patrz opis szczegółowy). Powtarza próbę kompilacji i uruchomienia. <span class="anchor" id="line-14"></span></li><li>Ćwiczenie zaliczeniowe: student rozszerza funkcjonalność programu według zamówienia prowadzącego. <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></li></ol><p class="line867">
</p><h4 id="Opis_szczeg.2BAPMBQg-owy">Opis szczegółowy</h4>
<span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line874">W trakcie zajęć nauczymy się podstaw przetwarzania tekstu w języku C. <span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p><p class="line867">
</p><h5 id="Rozpocz.2BARk-cie_pracy">Rozpoczęcie pracy</h5>
<span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line862">Zajęcia
 będą prowadzone na komputerze stud.iem.pw.edu.pl. W celu rozpoczęcia 
pracy należy zalogować się na tym komputerze za pomocą usługi ssh. Można
 w tym celu wykorzystać albo dostępny w każdym praktycznie systemie 
Unix/Linux program <a class="http" href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh</a> albo klienta SSH dla systemu Windows - <a class="http" href="http://www.chiark.greenend.org.uk/%7Esgtatham/putty/">PuTTY</a>.
 Na maszynach studenckich w IETiSIP PW można podnieść różne dystrybucje 
Uniksa/Linuksa lub system Windows, ale w każdej z nich jest 
zainstalowane oprogramowanie ssh.  <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line874">Do
 logowania na maszynie stud.iem.pw.edu.pl należy użyć takiego samego 
loginu i hasła jakie wykorzystywane sa do dostępu do usług wydziałowych 
(poczta, e-dziekanat, itd.). <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p><p class="line862">Po zalogowaniu się należy przejść do <a href="http://wikidyd.iem.pw.edu.pl/LMP/1">utworzonego na pierwszych zajęciach</a> katalogu lmp: <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span></p><pre><span class="anchor" id="line-1"></span> cd lmp</pre><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line867"><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span></p><div class="comment" style="display:none"><span class="anchor" id="line-1-1"></span><p class="line867"><a href="http://wikidyd.iem.pw.edu.pl/LMP/6/SVN">Pobranie kodu z repozytorium svn</a> </p></div><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line867">
</p><h5 id="Kod_do_zaj.2BARkBBw-">Kod do zajęć</h5>
<span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line867"><a class="attachment" href="http://wikidyd.iem.pw.edu.pl/LMP/6?action=AttachFile&amp;do=view&amp;target=lmp6.tgz" title="">lmp6.tgz</a> <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span></p><p class="line867">
</p><h5 id="Praca_nad_kodem">Praca nad kodem</h5>
<span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line867">
</p><h5 id="Pierwszy_program">Pierwszy program</h5>
<span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line874">Nasz pierwszy program wypisuje wszystkie argumenty podane w linii polecenia, ale sortuje je alfabetycznie: <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span></p><p class="line867"><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-1-2"></span></p><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ebabaff478f9faccff7914a07ba59bb072f1a53f\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="#" onclick="return togglenumber('CA-ebabaff478f9faccff7914a07ba59bb072f1a53f', 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_1">   1</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_1"></span><span class="anchor" id="line-1-3"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdio.h&gt;  </span><span class="Comment">// wiadomo po co</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_2">   2</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_2"></span><span class="anchor" id="line-2-1"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdlib.h&gt; </span><span class="Comment">// qsort</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_3">   3</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_3"></span><span class="anchor" id="line-3-1"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;string.h&gt; </span><span class="Comment">// strcmp</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_4">   4</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_4"></span><span class="anchor" id="line-4-1"></span><span class="Comment"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_5">   5</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_5"></span><span class="anchor" id="line-5-1"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_6">   6</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_6"></span><span class="anchor" id="line-6-1"></span><span class="ID">alphacmp</span>( <span class="ResWord">const</span> <span class="ResWord">void</span> *<span class="ID">a</span>, <span class="ResWord">const</span> <span class="ResWord">void</span> *<span class="ID">b</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_7">   7</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_7"></span><span class="anchor" id="line-7-1"></span>  <span class="ResWord">char</span> **<span class="ID">ca</span> = (<span class="ResWord">char</span>**)<span class="ID">a</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_8">   8</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_8"></span><span class="anchor" id="line-8-1"></span>  <span class="ResWord">char</span> **<span class="ID">cb</span> = (<span class="ResWord">char</span>**)<span class="ID">b</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_9">   9</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_9"></span><span class="anchor" id="line-9-1"></span>  <span class="ResWord">return</span> <span class="ID">strcmp</span>( <span class="ID">ca</span>, <span class="ID">cb</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_10">  10</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_10"></span><span class="anchor" id="line-10-1"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_11">  11</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_11"></span><span class="anchor" id="line-11-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_12">  12</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_12"></span><span class="anchor" id="line-12-1"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_13">  13</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_13"></span><span class="anchor" id="line-13-1"></span><span class="ID">main</span>( <span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span> **<span class="ID">argv</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_14">  14</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_14"></span><span class="anchor" id="line-14-1"></span>  <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_15">  15</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_15"></span><span class="anchor" id="line-15-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_16">  16</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_16"></span><span class="anchor" id="line-16-1"></span>  <span class="ID">qsort</span>( <span class="ID">argv</span>+<span class="Number">1</span>, <span class="ID">argc</span>-<span class="Number">1</span>, <span class="ResWord">sizeof</span> *<span class="ID">argv</span>, <span class="ID">alphacmp</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_17">  17</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_17"></span><span class="anchor" id="line-17-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_18">  18</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_18"></span><span class="anchor" id="line-18-1"></span>  <span class="ResWord">for</span>( <span class="ID">i</span>= <span class="Number">1</span>; <span class="ID">i</span> &lt; <span class="ID">argc</span>; <span class="ID">i</span>++ )</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_19">  19</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_19"></span><span class="anchor" id="line-19-1"></span>    <span class="ID">printf</span>( <span class="String">"</span><span class="String">%s</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="ID">i</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_20">  20</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_20"></span><span class="anchor" id="line-20-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_21">  21</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_21"></span><span class="anchor" id="line-21-1"></span>  <span class="ResWord">return</span> <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_22">  22</a> </span><span class="LineAnchor" id="CA-ebabaff478f9faccff7914a07ba59bb072f1a53f_22"></span><span class="anchor" id="line-22-1"></span>}</span>
</pre></div></div><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><p class="line874">Funkcja
 qsort sortuje (algorytmem szybkim) tablicę, podaną jako pierwszy 
argument. Drugi argument to liczba elementów do posortowania, a trzeci -
 wielkość pojedynczego elementu. Ponieważ funkcja qsort nie wie, co 
zawiera tablica, a więc aby porównać dwa elementy wywołuje dostarczaną 
przez użytkownika funkcję (nazwa tej funkcji to ostatni argument 
przekazywany qsort-owi).  <span class="anchor" id="line-74"></span>Funkcja
 porównująca otrzymuje dwa wskaźniki na elementy tablicy - musi 
,,wyłuskać" wskazywane elementy, porównać je i zwrócić całkowitą liczbę:
 <span class="anchor" id="line-75"></span></p><ul><li>ujemną - jeśli pierwszy element jest ,,mniejszy" niż drugi, <span class="anchor" id="line-76"></span></li><li>0 - jeśli elementy są ,,równe", <span class="anchor" id="line-77"></span></li><li>dodatnią - jeśli pierwszy element jest ,,większy" niż drugi. <span class="anchor" id="line-78"></span></li></ul><p class="line874">Funkcja qsort sortuje wektor niemalejąco według porządku (relacji) określanego przez funkcję porównującą. <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span></p><p class="line874">Oto przykładowe wyniki uruchomienia powyższego programu: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span></p><pre><span class="anchor" id="line-1-1"></span>oer:~/tmp/lmp6/gr1&gt; cc asort.c
<span class="anchor" id="line-2"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out ala ma kota a ola ma psa
<span class="anchor" id="line-3"></span>a
<span class="anchor" id="line-4"></span>ala
<span class="anchor" id="line-5"></span>kota
<span class="anchor" id="line-6"></span>ma
<span class="anchor" id="line-7"></span>ma
<span class="anchor" id="line-8"></span>ola
<span class="anchor" id="line-9"></span>psa
<span class="anchor" id="line-10"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out ala ma kota a Ola ma psa
<span class="anchor" id="line-11"></span>Ola
<span class="anchor" id="line-12"></span>a
<span class="anchor" id="line-13"></span>ala
<span class="anchor" id="line-14"></span>kota
<span class="anchor" id="line-15"></span>ma
<span class="anchor" id="line-16"></span>ma
<span class="anchor" id="line-17"></span>psa
<span class="anchor" id="line-18"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out Ala ma kota a Ola ma psa
<span class="anchor" id="line-19"></span>Ala
<span class="anchor" id="line-20"></span>Ola
<span class="anchor" id="line-21"></span>a
<span class="anchor" id="line-22"></span>kota
<span class="anchor" id="line-23"></span>ma
<span class="anchor" id="line-24"></span>ma
<span class="anchor" id="line-25"></span>psa
<span class="anchor" id="line-26"></span>oer:~/tmp/lmp6/gr1&gt;</pre><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><p class="line874">Zwróćmy
 uwagę, że porównanie wyrazów wykorzystuje kodowanie ASCII, co oznacza, 
że każda litera wielka jest mniejsza od każdej małej, a polskie znaki są
 większe od wszystkich liter angielskich. <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span></p><p class="line874">Drobna
 zmiana funkcji porównującej - dodanie znaku ,,-" przed wywołaniem 
strcmp spowoduje, że argumenty wywołania będą sortowane niemalejąco 
(powinni Państwo sprawdzić to osobiście). <span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span></p><p class="line867">
</p><h5 id="Drugi_program">Drugi program</h5>
<span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><p class="line874">Funkcja
 qsort potrafi sortować dowolne tablice - wykorzystajmy to do stworzenia
 programu, który posortuje znaki w każdym napisie, podanym jako argument
 linii poleceń: <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-1-4"></span></p><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="#" onclick="return togglenumber('CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8', 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_1">   1</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_1"></span><span class="anchor" id="line-1-5"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdio.h&gt;  </span><span class="Comment">// wiadomo po co</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_2">   2</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_2"></span><span class="anchor" id="line-2-2"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdlib.h&gt; </span><span class="Comment">// qsort</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_3">   3</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_3"></span><span class="anchor" id="line-3-2"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;string.h&gt; </span><span class="Comment">// strlen</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_4">   4</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_4"></span><span class="anchor" id="line-4-2"></span><span class="Comment"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_5">   5</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_5"></span><span class="anchor" id="line-5-2"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_6">   6</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_6"></span><span class="anchor" id="line-6-2"></span><span class="ID">charcmp</span>( <span class="ResWord">const</span> <span class="ResWord">void</span> *<span class="ID">a</span>, <span class="ResWord">const</span> <span class="ResWord">void</span> *<span class="ID">b</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_7">   7</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_7"></span><span class="anchor" id="line-7-2"></span>  <span class="ResWord">char</span> *<span class="ID">ca</span> = (<span class="ResWord">char</span>*)<span class="ID">a</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_8">   8</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_8"></span><span class="anchor" id="line-8-2"></span>  <span class="ResWord">char</span> *<span class="ID">cb</span> = (<span class="ResWord">char</span>*)<span class="ID">b</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_9">   9</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_9"></span><span class="anchor" id="line-9-2"></span>  <span class="ResWord">return</span>  *<span class="ID">ca</span> - *<span class="ID">cb</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_10">  10</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_10"></span><span class="anchor" id="line-10-2"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_11">  11</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_11"></span><span class="anchor" id="line-11-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_12">  12</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_12"></span><span class="anchor" id="line-12-2"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_13">  13</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_13"></span><span class="anchor" id="line-13-2"></span><span class="ID">main</span>( <span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span> **<span class="ID">argv</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_14">  14</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_14"></span><span class="anchor" id="line-14-2"></span>  <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_15">  15</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_15"></span><span class="anchor" id="line-15-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_16">  16</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_16"></span><span class="anchor" id="line-16-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_17">  17</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_17"></span><span class="anchor" id="line-17-2"></span>  <span class="ResWord">for</span>( <span class="ID">i</span>= <span class="Number">1</span>; <span class="ID">i</span> &lt; <span class="ID">argc</span>; <span class="ID">i</span>++ ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_18">  18</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_18"></span><span class="anchor" id="line-18-2"></span>    <span class="ID">qsort</span>( <span class="ID">argv</span>[<span class="ID">i</span>], <span class="ID">strlen</span>(<span class="ID">argv</span>[<span class="ID">i</span>]), <span class="ResWord">sizeof</span>( <span class="ResWord">char</span> ), <span class="ID">charcmp</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_19">  19</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_19"></span><span class="anchor" id="line-19-2"></span>    <span class="ID">printf</span>( <span class="String">"</span><span class="String">%s</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="ID">i</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_20">  20</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_20"></span><span class="anchor" id="line-20-2"></span>  }</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_21">  21</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_21"></span><span class="anchor" id="line-21-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_22">  22</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_22"></span><span class="anchor" id="line-22-2"></span>  <span class="ResWord">return</span> <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_23">  23</a> </span><span class="LineAnchor" id="CA-764e10c6bc46b7614cce20a4d3300c9f609ac9d8_23"></span><span class="anchor" id="line-23-1"></span>}</span>
</pre></div></div><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><p class="line874">Kompilacja i uruchomienie: <span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span></p><pre><span class="anchor" id="line-1-2"></span>oer:~/tmp/lmp6/gr1&gt; cc zsort.c
<span class="anchor" id="line-2-1"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out ala ma kota a ola ma psa
<span class="anchor" id="line-3-1"></span>aal
<span class="anchor" id="line-4-1"></span>am
<span class="anchor" id="line-5-1"></span>akot
<span class="anchor" id="line-6-1"></span>a
<span class="anchor" id="line-7-1"></span>alo
<span class="anchor" id="line-8-1"></span>am
<span class="anchor" id="line-9-1"></span>aps
<span class="anchor" id="line-10-1"></span>oer:~/tmp/lmp6/gr1&gt;</pre><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line867">
</p><h5 id="Trzeci_program">Trzeci program</h5>
<span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><p class="line874">Kolejny program pokazuje sortowanie niezbyt dużego pliku tekstowego. Na jego przykładzie obejrzymy: <span class="anchor" id="line-161"></span></p><ul><li>czytanie pliku linia po linii, <span class="anchor" id="line-162"></span></li><li>kopiowanie zawartości do pamięci w strukturze przypominającej argc i argv, <span class="anchor" id="line-163"></span></li><li>sortowanie alfabetyczne struktury za pomocą qsort. <span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span></li></ul><p class="line867"><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-1-6"></span></p><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-1445c269f40face52dc818845c52869339969afd\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="#" onclick="return togglenumber('CA-1445c269f40face52dc818845c52869339969afd', 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-1445c269f40face52dc818845c52869339969afd" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_1">   1</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_1"></span><span class="anchor" id="line-1-7"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdio.h&gt;  </span><span class="Comment">// wiadomo po co</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_2">   2</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_2"></span><span class="anchor" id="line-2-3"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdlib.h&gt; </span><span class="Comment">// qsort</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_3">   3</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_3"></span><span class="anchor" id="line-3-3"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;string.h&gt; </span><span class="Comment">// strcmp</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_4">   4</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_4"></span><span class="anchor" id="line-4-3"></span><span class="Comment"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_5">   5</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_5"></span><span class="anchor" id="line-5-3"></span><span class="Preprc">#</span><span class="Preprc">define BUFSIZE 8192    </span><span class="Comment">// zakładamy, że linie będą krótsze niż 8kB</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_6">   6</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_6"></span><span class="anchor" id="line-6-3"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">define MAXLINES 100000 </span><span class="Comment">// maksymalna liczba linii</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_7">   7</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_7"></span><span class="anchor" id="line-7-3"></span><span class="Comment"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_8">   8</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_8"></span><span class="anchor" id="line-8-3"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_9">   9</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_9"></span><span class="anchor" id="line-9-3"></span><span class="ID">alphacmp</span>( <span class="ResWord">const</span> <span class="ResWord">void</span> *<span class="ID">a</span>, <span class="ResWord">const</span> <span class="ResWord">void</span> *<span class="ID">b</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_10">  10</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_10"></span><span class="anchor" id="line-10-3"></span>  <span class="ResWord">char</span> **<span class="ID">ca</span> = (<span class="ResWord">char</span>**)<span class="ID">a</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_11">  11</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_11"></span><span class="anchor" id="line-11-3"></span>  <span class="ResWord">char</span> **<span class="ID">cb</span> = (<span class="ResWord">char</span>**)<span class="ID">b</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_12">  12</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_12"></span><span class="anchor" id="line-12-3"></span>  <span class="ResWord">return</span> <span class="ID">strcmp</span>( *<span class="ID">ca</span>, *<span class="ID">cb</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_13">  13</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_13"></span><span class="anchor" id="line-13-3"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_14">  14</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_14"></span><span class="anchor" id="line-14-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_15">  15</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_15"></span><span class="anchor" id="line-15-3"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_16">  16</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_16"></span><span class="anchor" id="line-16-3"></span><span class="ID">main</span>( <span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span> **<span class="ID">argv</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_17">  17</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_17"></span><span class="anchor" id="line-17-3"></span>  <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_18">  18</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_18"></span><span class="anchor" id="line-18-3"></span>  <span class="ResWord">char</span> *<span class="ID">kopia</span>[<span class="ID">MAXLINES</span>];</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_19">  19</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_19"></span><span class="anchor" id="line-19-3"></span>  <span class="ResWord">int</span> <span class="ID">ile_linii</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_20">  20</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_20"></span><span class="anchor" id="line-20-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_21">  21</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_21"></span><span class="anchor" id="line-21-3"></span>  <span class="ResWord">char</span> <span class="ID">buf</span>[<span class="ID">BUFSIZE</span>];</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_22">  22</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_22"></span><span class="anchor" id="line-22-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_23">  23</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_23"></span><span class="anchor" id="line-23-2"></span>  <span class="ID">FILE</span> *<span class="ID">in</span>= <span class="ID">argc</span> &gt; <span class="Number">1</span> ? <span class="ID">fopen</span>( <span class="ID">argv</span>[<span class="Number">1</span>], <span class="String">"</span><span class="String">r</span><span class="String">"</span> ) : <span class="ID">stdin</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_24">  24</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_24"></span><span class="anchor" id="line-24-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_25">  25</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_25"></span><span class="anchor" id="line-25-1"></span>  <span class="ResWord">if</span>( <span class="ID">in</span> == <span class="ResWord">NULL</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_26">  26</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_26"></span><span class="anchor" id="line-26-1"></span>    <span class="ID">fprintf</span>( <span class="ID">stderr</span>, <span class="String">"</span><span class="String">%s: błąd: nie mogę czytać pliku %s</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="Number">0</span>], <span class="ID">argv</span>[<span class="Number">1</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_27">  27</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_27"></span><span class="anchor" id="line-27-1"></span>    <span class="ResWord">return</span> <span class="ID">EXIT_FAILURE</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_28">  28</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_28"></span><span class="anchor" id="line-28-1"></span>  }</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_29">  29</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_29"></span><span class="anchor" id="line-29-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_30">  30</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_30"></span><span class="anchor" id="line-30-1"></span>  <span class="ID">ile_linii</span>= <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_31">  31</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_31"></span><span class="anchor" id="line-31-1"></span>  <span class="ResWord">while</span>( <span class="ID">fgets</span>( <span class="ID">buf</span>, <span class="ID">BUFSIZE</span>, <span class="ID">in</span> ) != <span class="ResWord">NULL</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_32">  32</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_32"></span><span class="anchor" id="line-32-1"></span>    <span class="ResWord">if</span>( <span class="ID">ile_linii</span> &lt; <span class="ID">MAXLINES</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_33">  33</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_33"></span><span class="anchor" id="line-33-1"></span>      <span class="ResWord">if</span>( (<span class="ID">kopia</span>[<span class="ID">ile_linii</span>]= <span class="ID">malloc</span>( (<span class="ID">strlen</span>(<span class="ID">buf</span>)+<span class="Number">1</span>) * <span class="ResWord">sizeof</span>( <span class="ResWord">char</span> ) )) == <span class="ResWord">NULL</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_34">  34</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_34"></span><span class="anchor" id="line-34-1"></span>        <span class="ID">fprintf</span>( <span class="ID">stderr</span>, <span class="String">"</span><span class="String">%s: błąd: zbyt wiele danych (brak pamięci)</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="Number">0</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_35">  35</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_35"></span><span class="anchor" id="line-35-1"></span>        <span class="ResWord">return</span> <span class="ID">EXIT_FAILURE</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_36">  36</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_36"></span><span class="anchor" id="line-36-1"></span>      }</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_37">  37</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_37"></span><span class="anchor" id="line-37-1"></span>      <span class="ID">strcpy</span>( <span class="ID">kopia</span>[<span class="ID">ile_linii</span>], <span class="ID">buf</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_38">  38</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_38"></span><span class="anchor" id="line-38-1"></span>      <span class="ID">ile_linii</span>++;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_39">  39</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_39"></span><span class="anchor" id="line-39-1"></span>    } <span class="ResWord">else</span> {</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_40">  40</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_40"></span><span class="anchor" id="line-40-1"></span>      <span class="ID">fprintf</span>( <span class="ID">stderr</span>, <span class="String">"</span><span class="String">%s: błąd: zbyt wiele linii wejścia</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="Number">0</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_41">  41</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_41"></span><span class="anchor" id="line-41-1"></span>      <span class="ResWord">return</span> <span class="ID">EXIT_FAILURE</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_42">  42</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_42"></span><span class="anchor" id="line-42-1"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_43">  43</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_43"></span><span class="anchor" id="line-43-1"></span>  }</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_44">  44</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_44"></span><span class="anchor" id="line-44-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_45">  45</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_45"></span><span class="anchor" id="line-45-1"></span>  <span class="ID">qsort</span>( <span class="ID">kopia</span>, <span class="ID">ile_linii</span>, <span class="ResWord">sizeof</span> *<span class="ID">kopia</span>, <span class="ID">alphacmp</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_46">  46</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_46"></span><span class="anchor" id="line-46-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_47">  47</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_47"></span><span class="anchor" id="line-47-1"></span>  <span class="ResWord">for</span>( <span class="ID">i</span>= <span class="Number">0</span>; <span class="ID">i</span> &lt; <span class="ID">ile_linii</span>; <span class="ID">i</span>++ )</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_48">  48</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_48"></span><span class="anchor" id="line-48-1"></span>    <span class="ID">printf</span>( <span class="String">"</span><span class="String">%s</span><span class="String">"</span>, <span class="ID">kopia</span>[<span class="ID">i</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_49">  49</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_49"></span><span class="anchor" id="line-49-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_50">  50</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_50"></span><span class="anchor" id="line-50-1"></span>  <span class="ResWord">return</span> <span class="ID">EXIT_SUCCESS</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-1445c269f40face52dc818845c52869339969afd_51">  51</a> </span><span class="LineAnchor" id="CA-1445c269f40face52dc818845c52869339969afd_51"></span><span class="anchor" id="line-51-1"></span>}</span>
</pre></div></div><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><p class="line874">Dane testowe (proszę zwrócić uwagę na kropkę w ostatniej linii): <span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span></p><pre><span class="anchor" id="line-1-3"></span>Ala
<span class="anchor" id="line-2-2"></span>ma kota
<span class="anchor" id="line-3-2"></span>a Ola ma
<span class="anchor" id="line-4-2"></span>psa
<span class="anchor" id="line-5-2"></span>.</pre><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><p class="line874">I wynik działania: <span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span></p><pre><span class="anchor" id="line-1-4"></span>oer:~/tmp/lmp6/gr1&gt; cc psort.c
<span class="anchor" id="line-2-3"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out dane.1
<span class="anchor" id="line-3-3"></span>.
<span class="anchor" id="line-4-3"></span>Ala
<span class="anchor" id="line-5-3"></span>a Ola ma
<span class="anchor" id="line-6-2"></span>ma kota
<span class="anchor" id="line-7-2"></span>psa
<span class="anchor" id="line-8-2"></span>oer:~/tmp/lmp6/gr1&gt;</pre><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><p class="line862">Ćwiczenie: sprawdzić działanie na innych danych (pliki dane.2 i dane.3, stworzyć samodzielnie duży plik - &gt; 1MB). <span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span></p><p class="line867">
</p><h5 id="Czwarty_program">Czwarty program</h5>
<span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><p class="line874">Ostatni
 przykładowy program wybiera z pliku (i wypisuje na stdout) linie 
zawierające słowo podane jako pierwszy argument. Nazwa pliku to drugi 
argument (o ile jest podany). Jeśli podamy tylko jeden argument, to 
program będzie czytał stdin. <span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span></p><p class="line867"><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><span class="anchor" id="line-1-8"></span></p><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6af2830c696e88de6b21b1933b932e89d56ef89d\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="#" onclick="return togglenumber('CA-6af2830c696e88de6b21b1933b932e89d56ef89d', 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_1">   1</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_1"></span><span class="anchor" id="line-1-9"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdio.h&gt;  </span><span class="Comment">// wiadomo po co</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_2">   2</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_2"></span><span class="anchor" id="line-2-4"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdlib.h&gt; </span><span class="Comment">// qsort</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_3">   3</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_3"></span><span class="anchor" id="line-3-4"></span><span class="Comment"></span><span class="Preprc">#</span><span class="Preprc">include &lt;string.h&gt; </span><span class="Comment">// strstr</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_4">   4</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_4"></span><span class="anchor" id="line-4-4"></span><span class="Comment"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_5">   5</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_5"></span><span class="anchor" id="line-5-4"></span><span class="Preprc">#</span><span class="Preprc">define BUFSIZE 8192    </span><span class="Comment">// zakładamy, że linie będą krótsze niż 8kB</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_6">   6</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_6"></span><span class="anchor" id="line-6-4"></span><span class="Comment"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_7">   7</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_7"></span><span class="anchor" id="line-7-4"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_8">   8</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_8"></span><span class="anchor" id="line-8-4"></span><span class="ID">main</span>( <span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span> **<span class="ID">argv</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_9">   9</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_9"></span><span class="anchor" id="line-9-4"></span>  <span class="ResWord">int</span> <span class="ID">ile_linii</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_10">  10</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_10"></span><span class="anchor" id="line-10-4"></span>  <span class="ResWord">char</span> <span class="ID">buf</span>[<span class="ID">BUFSIZE</span>];</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_11">  11</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_11"></span><span class="anchor" id="line-11-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_12">  12</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_12"></span><span class="anchor" id="line-12-4"></span>  <span class="ResWord">char</span> *<span class="ID">str</span>= <span class="ID">argc</span> &gt; <span class="Number">1</span> ? <span class="ID">argv</span>[<span class="Number">1</span>] : <span class="ResWord">NULL</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_13">  13</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_13"></span><span class="anchor" id="line-13-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_14">  14</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_14"></span><span class="anchor" id="line-14-4"></span>  <span class="ID">FILE</span> *<span class="ID">in</span>= <span class="ID">argc</span> &gt; <span class="Number">2</span> ? <span class="ID">fopen</span>( <span class="ID">argv</span>[<span class="Number">2</span>], <span class="String">"</span><span class="String">r</span><span class="String">"</span> ) : <span class="ID">stdin</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_15">  15</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_15"></span><span class="anchor" id="line-15-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_16">  16</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_16"></span><span class="anchor" id="line-16-4"></span>  <span class="ResWord">if</span>( <span class="ID">str</span> == <span class="ResWord">NULL</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_17">  17</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_17"></span><span class="anchor" id="line-17-4"></span>    <span class="ID">fprintf</span>( <span class="ID">stderr</span>, <span class="String">"</span><span class="String">%s: błąd: proszę podac napis do wyszukiwania</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="Number">0</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_18">  18</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_18"></span><span class="anchor" id="line-18-4"></span>    <span class="ResWord">return</span> <span class="ID">EXIT_FAILURE</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_19">  19</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_19"></span><span class="anchor" id="line-19-4"></span>  }</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_20">  20</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_20"></span><span class="anchor" id="line-20-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_21">  21</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_21"></span><span class="anchor" id="line-21-4"></span>  <span class="ResWord">if</span>( <span class="ID">in</span> == <span class="ResWord">NULL</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_22">  22</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_22"></span><span class="anchor" id="line-22-4"></span>    <span class="ID">fprintf</span>( <span class="ID">stderr</span>, <span class="String">"</span><span class="String">%s: błąd: nie mogę czytać pliku %s</span><span class="SPChar">\n</span><span class="String">"</span>, <span class="ID">argv</span>[<span class="Number">0</span>], <span class="ID">argv</span>[<span class="Number">2</span>] );</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_23">  23</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_23"></span><span class="anchor" id="line-23-3"></span>    <span class="ResWord">return</span> <span class="ID">EXIT_FAILURE</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_24">  24</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_24"></span><span class="anchor" id="line-24-2"></span>  }</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_25">  25</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_25"></span><span class="anchor" id="line-25-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_26">  26</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_26"></span><span class="anchor" id="line-26-2"></span>  <span class="ID">ile_linii</span>= <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_27">  27</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_27"></span><span class="anchor" id="line-27-2"></span>  <span class="ResWord">while</span>( <span class="ID">fgets</span>( <span class="ID">buf</span>, <span class="ID">BUFSIZE</span>, <span class="ID">in</span> ) != <span class="ResWord">NULL</span> ) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_28">  28</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_28"></span><span class="anchor" id="line-28-2"></span>    <span class="ID">ile_linii</span>++;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_29">  29</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_29"></span><span class="anchor" id="line-29-2"></span>    <span class="ResWord">if</span>( <span class="ID">strstr</span>( <span class="ID">buf</span>, <span class="ID">str</span> ) != <span class="ResWord">NULL</span> )</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_30">  30</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_30"></span><span class="anchor" id="line-30-2"></span>      <span class="ID">printf</span>( <span class="String">"</span><span class="String">%s</span><span class="String">"</span>, <span class="ID">buf</span> );</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_31">  31</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_31"></span><span class="anchor" id="line-31-2"></span>  }</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_32">  32</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_32"></span><span class="anchor" id="line-32-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_33">  33</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_33"></span><span class="anchor" id="line-33-2"></span>  <span class="ResWord">return</span> <span class="ID">EXIT_SUCCESS</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-6af2830c696e88de6b21b1933b932e89d56ef89d_34">  34</a> </span><span class="LineAnchor" id="CA-6af2830c696e88de6b21b1933b932e89d56ef89d_34"></span><span class="anchor" id="line-34-2"></span>}</span>
</pre></div></div><span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span><p class="line874">Kompilacja i uruchomienie: <span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span></p><p class="line867"><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span></p><pre><span class="anchor" id="line-1-5"></span>oer:~/tmp/lmp6/gr1&gt; cc pstr.c
<span class="anchor" id="line-2-4"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out Ala dane.1
<span class="anchor" id="line-3-4"></span>Ala
<span class="anchor" id="line-4-4"></span>oer:~/tmp/lmp6/gr1&gt; ./a.out ma dane.1
<span class="anchor" id="line-5-4"></span>ma kota
<span class="anchor" id="line-6-3"></span>a Ola ma
<span class="anchor" id="line-7-3"></span>oer:~/tmp/lmp6/gr1&gt;</pre><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><p class="line874">Ćwiczenie: proszę zmodyfikować program pstr.c tak, aby podawał numery linii, w których znaleziono napis. <span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span></p><p class="line867">
</p><h5 id="Program_na_zaliczenie">Program na zaliczenie</h5>
<span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><p class="line874">Do wyboru przez prowadzącego:  <span class="anchor" id="line-301"></span></p><ul><li>program, który zapisuje wybrane linie do pamięci, sortuje je i wypisuje po posortowaniu, <span class="anchor" id="line-302"></span></li><li>program sortujący linie numerycznie (według wartości traktowanej jako liczba), <span class="anchor" id="line-303"></span></li><li>program wyszukujący linie zawierające co najmniej jeden lub wszystkie z podanych kilku wzorców, <span class="anchor" id="line-304"></span></li><li>i.t.p. <span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span></li></ul><p class="line867"></p><hr class="hr4"><p class="line874"> <span class="anchor" id="line-308"></span>To już prawie wszystko, ale nie wolno nam zapomnieć, że <span class="anchor" id="line-309"></span></p><div><table><tbody><tr>  <td style="border-width: 0px; ; width: 66%"><p class="line862">materiały zostały opracowane w ramach realizacji Programu Rozwojowego Politechniki Warszawskiej. </p></td>
  <td style="border-width: 0px;  text-align: right;"><p class="line862"> <img alt="http://prpw.iem.pw.edu.pl/images/KAPITAL_LUDZKI.gif" class="external_image" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/KAPITAL_LUDZKI.gif" title="http://prpw.iem.pw.edu.pl/images/KAPITAL_LUDZKI.gif"> <img alt="http://prpw.iem.pw.edu.pl/images/EU+EFS_P-kolor.gif" class="external_image" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/EUEFS_P-kolor.gif" title="http://prpw.iem.pw.edu.pl/images/EU+EFS_P-kolor.gif"> </p></td>
</tr>
<tr>  <td colspan="2" style="border-width: 0px;  text-align: center;"><span class="anchor" id="line-310"></span><p class="line891"><small><a class="http" href="http://www.pr.pw.edu.pl/"><img alt="http://www.pr.pw.edu.pl/" class="external_image" src="LMP_6%20-%20wikidyd%20-%20IETiSIP,%20Wydzial%20Elektryczny%20Politechniki%20Warszawskiej_files/small_logo_prpw.jpg" title="http://www.pr.pw.edu.pl/"></a> jest projektem współfinansowanym przez Unię Europejską w ramach <a class="http" href="http://www.efs.gov.pl/">Europejskiego Funduszu społecznego</a>
 (działanie 4.1.1 Programu Operacyjnego Kapitał Ludzki) i ma na celu 
poprawę jakości kształcenia oraz dostosowanie oferty dydaktycznej 
Politechniki Warszawskiej do potrzeb rynku pracy. Będzie on realizowany 
przez Uczelnię w latach 2008-2015.</small> </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-311"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" dir="ltr" lang="en">wikidyd - IETiSIP, Wydzial Elektryczny Politechniki Warszawskiej: LMP/6  (last edited 2011-09-28 09:47:40 by <span title="JacekStarzyński @ oer.iem.pw.edu.pl[194.29.146.107]"><a href="http://wikidyd.iem.pw.edu.pl/JacekStarzy%C5%84ski" title="JacekStarzyński @ oer.iem.pw.edu.pl[194.29.146.107]">JacekStarzyński</a></span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>



</body><div data="{&quot;a&quot;:&quot;setShowingSafe&quot;,&quot;f&quot;:false}" style="display:none" id="sp_console_event"></div></html>